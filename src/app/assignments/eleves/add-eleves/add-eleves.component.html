<!--<div class="form-container">
  <mat-toolbar>
        <h4 style="text-decoration: underline;">Ajout d'un élève</h4>
  </mat-toolbar>
  <form ngForm #formAddEleve (submit)="addEleve(); formAddEleve.reset()">
      <mat-card class="example-card">
          <mat-form-field appearance="fill">
              <mat-label>Entrer votre nom</mat-label>
              <input [formControl]="nom"   matInput required autocomplete="" />
             <mat-error *ngIf="nom.invalid">{{ getErrorMessage() }}</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
              <mat-label>Entrer votre prénom</mat-label>
              <input matInput [formControl]="prenom"   required autocomplete="" />
              <mat-error *ngIf="prenom.invalid">{{ getErrorMessage() }}</mat-error>
          </mat-form-field>
  
          <mat-form-field>
              <mat-label>Entrer votre photo</mat-label>
              <input matInput [formControl]="image"  required autocomplete="" />
              <!--<ngx-mat-file-input   required placeholder="Basic Input" ></ngx-mat-file-input>
              <mat-icon matSuffix>folder</mat-icon>
              <mat-error *ngIf="image.invalid">{{ getErrorMessage() }}</mat-error>
            </mat-form-field>
          <mat-form-field>
              <mat-label>Sexe</mat-label>
              <mat-select [formControl]="sexe" name="sexe">
                  <mat-option *ngFor="let sexe of sexes" [value]="sexe.value">
                      {{sexe.viewValue}}
                    </mat-option>
              </mat-select>
              <mat-error *ngIf="sexe.invalid">{{ getErrorMessage() }}</mat-error>
          </mat-form-field>
        
          <button mat-raised-button> VALIDER </button>
      </mat-card>
  </form>
</div>-->
<div class="form-container" id="direct_upload" ng2FileDrop [uploader]="uploader" (fileOver)="fileOverBase($event)"
  [ngClass]="{'nv-file-over': hasBaseDropZoneOver}">
  <mat-toolbar>
    <h4 style="text-decoration: underline;">Ajout d'un élève</h4>
  </mat-toolbar>
  <form ngForm #formAddEleve (submit)="addEleve(); formAddEleve.reset()">
    <mat-card class="example-card">
      <mat-form-field appearance="fill">
        <mat-label>Entrer votre nom</mat-label>
        <input [formControl]="nom" matInput required autocomplete="" />
        <mat-error *ngIf="nom.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Entrer votre prénom</mat-label>
        <input matInput [formControl]="prenom" required autocomplete="" />
        <mat-error *ngIf="prenom.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>

      <!-- <mat-form-field>
          <mat-label>Entrer votre photo</mat-label>
          <input matInput [formControl]="image"  required autocomplete="" />
          <!--<ngx-mat-file-input   required placeholder="Basic Input" ></ngx-mat-file-input>
          <mat-icon matSuffix>folder</mat-icon>
          <mat-error *ngIf="image.invalid">{{ getErrorMessage() }}</mat-error>
        </mat-form-field>-->
      <mat-form-field>
        <mat-label>Sexe</mat-label>
        <mat-select [formControl]="sexe" name="sexe">
          <mat-option *ngFor="let sexe of sexes" [value]="sexe.value">
            {{sexe.viewValue}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="sexe.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Ajouter votre photo</mat-label>
        <!--<input matInput [formControl]="image"  required autocomplete="" />-->
        <ngx-mat-file-input [(ngModel)]="image" [formControl]="image" id="fileupload" #fileInput 
        ng2FileSelect [style.display]="'none'" [uploader]="uploader"
        (change)="fileInput.value=''" multiple required  ></ngx-mat-file-input>
    
        <!--<input [formControl]="image" type="file" id="fileupload" #fileInput ng2FileSelect [style.display]="'none'" [uploader]="uploader"
              (change)="fileInput.value=''" multiple />-->
        <mat-icon matSuffix>folder</mat-icon>
        <mat-error *ngIf="image.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>

      <!--<div class="form_line">
        <label>Image:</label>
        <div class="form_controls">
          <div class="upload_button_holder">
            <label class="upload_button" for="fileupload">Upload</label>
            
            <input [formControl]="image" type="file" id="fileupload" #fileInput ng2FileSelect [style.display]="'none'" [uploader]="uploader"
              (change)="fileInput.value=''" multiple />
          </div>
        </div>
      </div>-->

      <button mat-raised-button> VALIDER </button>
    </mat-card>
  </form>
  <h2>Status</h2>
  <div class="file" *ngFor="let response of responses; let i = index">
    <h3>{{response.file.name}}</h3>
    <button class="delete-image" *ngIf="!!response.data.delete_token" (click)="deleteImage(response.data, i)">Delete
      image</button>
    <div class="status">
      Uploading... {{response.progress}}%
      <div *ngIf="!response.status">In progress</div>
      <div class="status-code" *ngIf="response.status">Upload completed with status code {{response.status}}</div>
    </div>
    <div class="progress-bar">
      <div class="progress" role="progressbar" [style.width.%]="response.progress"></div>
    </div>
    <div class="form_line">
      <div class="form_controls">
        <div class="preview">
          <!-- Consider using https://github.com/valor-software/ng2-file-upload/issues/461 for image preview -->
        </div>
      </div>
    </div>
    <div class="info">
      <table>
        <tr *ngFor="let property of getFileProperties(response.data)">
          <td> {{ property.key }} </td>
          <td> {{ property.value | json}} </td>
        </tr>
      </table>
    </div>
  </div>

</div>

<a routerLink="../../assignments/eleves" class="back_link">Back to list</a>